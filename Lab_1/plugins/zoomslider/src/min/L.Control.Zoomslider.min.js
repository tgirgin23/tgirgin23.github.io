!function(t){var o;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)o=require("leaflet"),module.exports=t(o);else{if("undefined"==typeof window.L)throw new Error("Leaflet must be loaded first");t(window.L)}}(function(t){"use strict";t.Control.Zoomslider=function(){var o=t.Draggable.extend({initialize:function(o,i,e){t.Draggable.prototype.initialize.call(this,o,o),this._element=o,this._stepHeight=i,this._knobHeight=e,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(t){var o=Math.round(this._toValue(t));return o=Math.max(0,Math.min(this._maxValue,o)),this._toY(o)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var o=t*this._stepHeight;this._maxValue=t-1,this._k=-this._stepHeight,this._m=o-(this._stepHeight+this._knobHeight)/2},setPosition:function(o){t.DomUtil.setPosition(this._element,t.point(0,this._adjust(o)))},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){return this._toValue(t.DomUtil.getPosition(this._element).y)}}),i=t.Control.extend({options:{position:"topleft",stepHeight:8,knobHeight:6,styleNS:"leaflet-control-zoomslider"},onAdd:function(t){return this._map=t,this._ui=this._createUI(),this._knob=new o(this._ui.knob,this.options.stepHeight,this.options.knobHeight),t.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(t){t.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var o={},i=this.options.styleNS;return o.bar=t.DomUtil.create("div",i+" leaflet-bar"),o.zoomIn=this._createZoomBtn("in","top",o.bar),o.wrap=t.DomUtil.create("div",i+"-wrap leaflet-bar-part",o.bar),o.zoomOut=this._createZoomBtn("out","bottom",o.bar),o.body=t.DomUtil.create("div",i+"-body",o.wrap),o.knob=t.DomUtil.create("div",i+"-knob"),t.DomEvent.disableClickPropagation(o.bar),t.DomEvent.disableClickPropagation(o.knob),o},_createZoomBtn:function(o,i,e){var n=this.options.styleNS+"-"+o+" leaflet-bar-part leaflet-bar-part-"+i,s=t.DomUtil.create("a",n,e);return s.href="#",s.title="Zoom "+o,t.DomEvent.on(s,"click",t.DomEvent.preventDefault),s},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),t.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),t.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),t.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(o){var i=o.touches&&1===o.touches.length?o.touches[0]:o,e=t.DomEvent.getMousePosition(i,this._ui.body).y;this._knob.setPosition(e),this._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return 1/0>t?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*t+"px",this._knob.setSteps(t)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var o=this._map.getZoom(),i=this.options.styleNS+"-disabled";t.DomUtil.removeClass(this._ui.zoomIn,i),t.DomUtil.removeClass(this._ui.zoomOut,i),o===this._map.getMinZoom()&&t.DomUtil.addClass(this._ui.zoomOut,i),o===this._map.getMaxZoom()&&t.DomUtil.addClass(this._ui.zoomIn,i)}});return i}(),t.Map.addInitHook(function(){this.options.zoomsliderControl&&(this.zoomsliderControl=new t.Control.Zoomslider,this.addControl(this.zoomsliderControl))}),t.control.zoomslider=function(o){return new t.Control.Zoomslider(o)}});